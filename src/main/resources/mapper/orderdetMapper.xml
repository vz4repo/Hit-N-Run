<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.homerunball.order.dao.OrderDetDao">

    <select id="count" resultType="int">
        select count(*) from ord_det;
    </select>

    <delete id="delete" parameterType="map" >
        delete from ord_det
        where od_det_seqnum = #{od_det_seqnum} and od_id = #{od_id} and pd_id = #{pd_id} and pd_clsf_cd = #{pd_clsf_cd}
    </delete>

    <delete id="deleteAll">
        delete from ord_det
    </delete>

    <select id="select" parameterType="String" resultType="OrderDetDto">
        select od_det_seqnum
             ,  od_id
             ,  pd_id
             ,  pd_clsf_cd
             ,  od_dt
             ,  pd_name
             ,  slg_prc
             ,  od_qty
             ,  dlvry_stat_cd
             , frst_reg_dt
             , frst_reg_id
             , last_mod_dt
             , last_mod_id
        from ord_det
        where od_det_seqnum=#{od_det_seqnum} and od_id = #{od_id}
    </select>

    <select id="selectAll" resultType="OrderDetDto">
        select  od_det_seqnum
             ,  od_id
             ,  pd_id
             ,  pd_clsf_cd
             ,  od_dt
             ,  pd_name
             ,  slg_prc
             ,  od_qty
             ,  dlvry_stat_cd
             , frst_reg_dt
             , frst_reg_id
             , last_mod_dt
             , last_mod_id
        from ord_det
        order by frst_reg_dt desc, od_det_seqnum desc
    </select>

    <insert id="insert" parameterType="OrderDetDto">
        insert  into ord_det
        (od_det_seqnum, od_id, pd_id, pd_clsf_cd, od_dt, pd_name, slg_prc, od_qty, dlvry_stat_cd, frst_reg_dt, frst_reg_id, last_mod_dt, last_mod_id)
        values
            (#{od_det_seqnum}, #{od_id}, #{pd_id}, #{pd_clsf_cd}, #{od_dt},#{pd_name},#{slg_prc},#{od_qty},#{dlvry_stat_cd},#{frst_reg_dt},#{frst_reg_id},#{last_mod_dt},#{last_mod_id})
    </insert>

    <update id="update" parameterType="OrderDetDto">
        update ord_det
        set od_id           = #{od_id}
          ,   pd_id           = #{pd_id}
          ,   pd_clsf_cd      = #{pd_clsf_cd}
          ,   od_dt           = #{od_dt}
          ,   pd_name         = #{pd_name}
          ,   slg_prc         = #{slg_prc}
          ,   od_qty          = #{od_qty}
          ,   dlvry_stat_cd   = #{dlvry_stat_cd}
          ,   frst_reg_dt     = #{frst_reg_dt}
          ,   frst_reg_id     = #{frst_reg_id}
          ,   last_mod_dt     = #{last_mod_dt}
          ,   last_mod_id     = #{last_mod_id}
        where od_det_seqnum = #{od_det_seqnum}
        order by od_id desc;
    </update>

    <select id="findById" parameterType="string" resultType="OrderDetDto">
        SELECT * FROM ord_det WHERE od_id = #{od_Id}
    </select>
</mapper>